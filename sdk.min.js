/*! Ringover AI Chat SDK v1.0.1 Build time: 12-02-2025 15:13:08 */
function log(...t){window.origin.includes("localhost")&&console.log(...t)}let ENV={PRODUCTION:"production",STAGING:"staging",DEV:"dev"},IFRAME_SRC_MAP={[ENV.PRODUCTION]:"https://ask-airo-dot-aichat-408808.ey.r.appspot.com",[ENV.STAGING]:"https://ask-airo-dot-aichat-408808.ey.r.appspot.com",[ENV.DEV]:"https://ask-airo-dot-aichat-408808.ey.r.appspot.com"};class AskAiroChat{isIframePresent=!1;isReady=!1;MESSAGE_TYPES={IS_READY:"is_ready",IS_CHATBOX_OPEN:"is_chatbox_open",SET_STYLES:"set_styles",URL_CHANGED:"url_changed"};CLOSED_CHAT_WIDTH="60px";CLOSED_CHAT_HEIGHT="60px";OPEN_CHAT_WIDTH="400px";OPEN_CHAT_HEIGHT="600px";constructor(t={}){if(!this.isIframePresent){var e=document.createElement("IFRAME"),s=t?.env||ENV.PRODUCTION;let i=t?.baseUrl||IFRAME_SRC_MAP[s];s=i+"/chat";e.src=s,this.iframe=e,this.baseUrl=i,this.options=t,document.body.appendChild(this.iframe),this.isIframePresent=!0,this.setStyles(t);window.addEventListener("message",t=>{var e=i;t.origin.includes(e.replace(/^https?:\/\//,"").split("/")[0])&&(log("MESSAGE FROM IFRAME",t.data),t.data?.type===this.MESSAGE_TYPES.IS_READY?this.isReady=!0:t.data?.type===this.MESSAGE_TYPES.IS_CHATBOX_OPEN&&(t.data.data?(this.iframe.style.width=this.OPEN_CHAT_WIDTH,this.iframe.style.height=this.OPEN_CHAT_HEIGHT,this.iframe.style.boxShadow="rgba(0, 0, 0, 0.3) 0 20px 60px, rgba(0, 0, 0, 0.2) 0 8px 24px"):(this.iframe.style.width=this.CLOSED_CHAT_WIDTH,this.iframe.style.height=this.CLOSED_CHAT_HEIGHT,this.iframe.style.boxShadow="none")))}),this.trackUrlChanges(),setTimeout(()=>{this.sendMessage({type:this.MESSAGE_TYPES.IS_READY})},100)}}sendMessage(t){this.iframe&&this.iframe.contentWindow&&this.iframe.contentWindow.postMessage(t,"*")}setStyles(t){var e=t?.position||"bottom-right",i=t?.buttonSize||60,s=(t?.buttonColor,t?.zIndex||9999),i=(this.iframe.frameBorder="0",this.iframe.style.width=i+"px",this.iframe.style.height=i+"px",this.iframe.style.border="none",this.iframe.style.position="fixed",this.iframe.style.zIndex=s,this.iframe.style.borderRadius="50%",this.iframe.style.overflow="hidden",this.iframe.style.transition="all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",this.iframe.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.15), 0 2px 4px rgba(0, 0, 0, 0.1)",t?.offset||20);"bottom-right"===e?(this.iframe.style.bottom=i+"px",this.iframe.style.right=i+"px",this.iframe.style.left="auto",this.iframe.style.top="auto"):"bottom-left"===e?(this.iframe.style.bottom=i+"px",this.iframe.style.left=i+"px",this.iframe.style.right="auto",this.iframe.style.top="auto"):"top-right"===e?(this.iframe.style.top=i+"px",this.iframe.style.right=i+"px",this.iframe.style.left="auto",this.iframe.style.bottom="auto"):"top-left"===e&&(this.iframe.style.top=i+"px",this.iframe.style.left=i+"px",this.iframe.style.right="auto",this.iframe.style.bottom="auto"),void 0!==t?.bottom&&(this.iframe.style.bottom=t.bottom),void 0!==t?.top&&(this.iframe.style.top=t.top),void 0!==t?.left&&(this.iframe.style.left=t.left),void 0!==t?.right&&(this.iframe.style.right=t.right),this.sendMessage({type:this.MESSAGE_TYPES.SET_STYLES,data:t})}trackUrlChanges(){let e=()=>{var t=window.location.href;this.sendMessage({type:this.MESSAGE_TYPES.URL_CHANGED,url:t})},i=history.pushState,s=history.replaceState;history.pushState=(...t)=>{i.apply(history,t),e()},history.replaceState=(...t)=>{s.apply(history,t),e()},window.addEventListener("popstate",e),e()}open(){this.sendMessage({type:"open_chat"})}close(){this.sendMessage({type:"close_chat"})}toggle(){this.sendMessage({type:"toggle_chat"})}updateConfig(t){this.options={...this.options,...t},this.setStyles(this.options)}destroy(){this.iframe&&this.iframe.parentNode&&this.iframe.parentNode.removeChild(this.iframe),this.isIframePresent=!1,this.isReady=!1}}function initWidget(){if(window.AuraChatWidget&&window.AuraChatWidget instanceof AskAiroChat)return window.AuraChatWidget;var t,e,i,s,a,o=document.currentScript||document.querySelector("script[data-aura-config]")||document.querySelector('script[src*="sdk"]');let r={};return o&&(a=o.getAttribute("data-base-url"),t=o.getAttribute("data-env"),e=o.getAttribute("data-position"),i=o.getAttribute("data-button-color"),s=o.getAttribute("data-button-size"),o=o.getAttribute("data-z-index"),a&&(r.baseUrl=a),t&&(r.env=t),e&&(r.position=e),i&&(r.buttonColor=i),s&&(r.buttonSize=parseInt(s,10)),o)&&(r.zIndex=parseInt(o,10)),window.AuraChatConfig&&(r={...r,...window.AuraChatConfig}),0!==Object.keys(r).length||r.baseUrl?(a=new AskAiroChat(r),window.AuraChatWidget=a):null}window.AskAiroChat=AskAiroChat,window.AuraChatWidget=AskAiroChat,"undefined"!=typeof module&&module.exports&&(module.exports=AskAiroChat),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",initWidget):setTimeout(initWidget,0);
